var r=Object.defineProperty;var c=Object.getOwnPropertySymbols;var d=Object.prototype.hasOwnProperty,l=Object.prototype.propertyIsEnumerable;var a=(i,e,t)=>e in i?r(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t,n=(i,e)=>{for(var t in e||(e={}))d.call(e,t)&&a(i,t,e[t]);if(c)for(var t of c(e))l.call(e,t)&&a(i,t,e[t]);return i};class u{constructor(e={}){this.config=n({default:!1,cookie:"cead",attribute:"data-cead",srcAttribute:"data-src",link:"#cead",cookies:[]},e),this.el=document.querySelector(".cead"),this.focus=!1,this.init()}init(){const e=this.getCookie(this.config.name);(this.config.default?e!=="false":e==="true")&&this.activate(),e||this.el.setattr("data-show","true");const o=document.querySelector(".cead__btn--accept");o&&o.addEventListener("click",()=>{this.el.removeattr("data-show"),this.focus&&this.focus.focus(),this.activate()});const s=document.querySelector(".cead__btn--decline");s&&s.addEventListener("click",()=>{this.el.removeattr("data-show"),this.focus&&this.focus.focus(),this.deactivate()}),this.links()}getCookie(e){var t;return((t=document.cookie.match("(^|;)\\s*"+e+"\\s*=\\s*([^;]+)"))==null?void 0:t.pop())||""}activate(){this.setCookie(!0);const e=document.querySelectorAll(`[${this.config.attr}]`);for(let t of e)if(!t.hasattr("src")&&!t.hasattr(this.config.srcAttr)){const o=t.cloneNode(!0);o.setattr("type","text/javascript"),t.after(o),t.remove()}else t.setattr("src",t.getattr(this.config.srcAttr))}deactivate(){var t;this.setCookie(!1);const e=document.cookie.split(";");for(let o of e){const s=((t=o.match("\\s*(.*?)\\s*=.*"))==null?void 0:t[1])||"none";this.config.cookies.includes(s)&&(document.cookie=s+"=; path=/; domain="+document.domain+"; Expires=Thu, 01 Jan 1970 00:00:01 GMT;",document.cookie=s+"=; path=/; domain=."+document.domain+"; Expires=Thu, 01 Jan 1970 00:00:01 GMT;")}}setCookie(e){let t=new Date;t.setFullYear(t.getFullYear()+1),document.cookie=`${this.config.name}=${e}; path=/; domain=.${document.domain}; Expires=${t.toUTCString()};`}links(){document.querySelectorAll(`a[href="${this.config.link}"]`).forEach(t=>{t.addEventListener("click",o=>{o.preventDefault(),this.focus=document.activeel,this.el.setattr("data-show","true"),this.el.focus()})})}}export default u;
